import{H as w,_ as V,d as u,e as o,r as a,a as N,o as n,j as d,c as b,F as v,h as S,k as g,t as O,f as j,i as y,I as B,w as P}from"../index-DYxDfolO.js";const{get:h,post:$,put:D,delt:K}=w,i="/tag",M=e=>h(`${i}/findTagGroups`,{...e,groupTagType:1}),z=e=>h(`${i}/getKeyWordGroupBaseInfo/${e}`),E=e=>K(`${i}/${e}`),G=e=>$(`${i}`,{...e,groupTagType:1});function L(e){return D(`${i}`,{...e,groupTagType:1})}const q=e=>$(`${i}/synchTags`,e),U=Object.freeze(Object.defineProperty({__proto__:null,add:G,del:E,getDetail:z,getList:M,sync:q,update:L},Symbol.toStringTag,{value:"Module"})),{get:I,post:F,put:J,delt:R}=w,p="/tag",W=e=>I(`${p}/findTagGroups`,{...e,groupTagType:2}),H=e=>I(`${p}/getKeyWordGroupBaseInfo/${e}`),Q=e=>R(`${p}/${e}`),X=e=>F(`${p}`,{...e,groupTagType:2});function Y(e){return J(`${p}`,{...e,groupTagType:2})}const Z=Object.freeze(Object.defineProperty({__proto__:null,add:X,del:Q,getDetail:H,getList:W,update:Y},Symbol.toStringTag,{value:"Module"})),ee={name:"AddTag",components:{},props:{visible:{type:Boolean,default:!1},form:{type:Object,default:()=>({groupName:"",weTags:[]})},module:{type:String,default:"customerTag"}},emits:["update:visible"],data(){return{newInput:"",rules:Object.freeze({groupName:[{required:!0,message:"必填项",trigger:"blur"}],weTags:[{required:!0,message:"必填项",trigger:"blur"}]}),visibleAdd:!1}},watch:{},computed:{Pvisible:{get(){return this.visible&&this.$nextTick(()=>{this.$refs.form.clearValidate()}),this.visible},set(e){this.$emit("update:visible",e)}}},created(){},mounted(){},methods:{closeTag(e,t){this.form.weTags.splice(t,1)},showInput(){this.visibleAdd=!0,this.$nextTick(e=>{this.$refs.saveTagInput.$refs.input.focus()})},newInputConfirm(){let e=this.newInput;if(e){if(Array.isArray(this.form.weTags)||(this.form.weTags=[]),this.form.weTags.some(r=>r.name===e)){this.msgError("标签名已存在，不可重复添加");return}this.form.weTags.push({name:e})}this.visibleAdd=!1,this.newInput=""},submit(){this.visibleAdd||this.$refs.form.validate(e=>{this.newInput="";let t=JSON.parse(JSON.stringify(this.form));if(!t.weTags.length)return;(this.module==="groupTag"?Z:U)[t.groupId?"update":"add"](t).then(()=>{this.msgSuccess("操作成功"),this.Pvisible=!1,this.$emit("success")})})}}},te={class:"dialog-footer"};function se(e,t,r,re,m,l){const c=a("el-input"),_=a("el-form-item"),k=a("el-tag"),f=a("el-button"),C=a("el-form"),A=a("el-drawer"),x=N("preventReClick");return n(),u(A,{title:(r.form.groupId?"修改":"添加")+"标签/组","model-value":l.Pvisible,"onUpdate:modelValue":t[3]||(t[3]=s=>l.Pvisible=s),width:"500px","append-to-body":"","close-on-click-modal":!1},{footer:o(()=>[y("div",te,[P((n(),u(f,{type:"primary",onClick:l.submit},{default:o(()=>[...t[5]||(t[5]=[g("确 定",-1)])]),_:1},8,["onClick"])),[[x,1e3]]),d(f,{onClick:t[2]||(t[2]=s=>l.Pvisible=!1)},{default:o(()=>[...t[6]||(t[6]=[g("取 消",-1)])]),_:1})])]),default:o(()=>[d(C,{ref:"form",model:r.form,rules:m.rules,"label-width":"100px"},{default:o(()=>[d(_,{label:"标签组名称",prop:"groupName"},{default:o(()=>[d(c,{modelValue:r.form.groupName,"onUpdate:modelValue":t[0]||(t[0]=s=>r.form.groupName=s),modelModifiers:{trim:!0},maxlength:"15","show-word-limit":"",placeholder:"请输入标签组名称，该名称不支持再次修改"},null,8,["modelValue"])]),_:1}),d(_,{label:"标签",prop:"weTags"},{default:o(()=>[(n(!0),b(v,null,S(r.form.weTags,(s,T)=>(n(),b(v,{key:T},[s.status!==1?(n(),u(k,{key:0,type:"primary",closable:"",onClose:le=>l.closeTag(s,T)},{default:o(()=>[g(O(s.name),1)]),_:2},1032,["onClose"])):j("",!0)],64))),128)),y("div",null,[m.visibleAdd?(n(),u(c,{key:0,class:"input-new-tag",modelValue:m.newInput,"onUpdate:modelValue":t[1]||(t[1]=s=>m.newInput=s),modelModifiers:{trim:!0},ref:"saveTagInput",maxlength:"10","show-word-limit":"",onKeyup:B(l.newInputConfirm,["enter"]),onBlur:l.newInputConfirm},null,8,["modelValue","onKeyup","onBlur"])):(n(),u(f,{key:1,type:"primary",plain:"",class:"button-new-tag",onClick:l.showInput},{default:o(()=>[...t[4]||(t[4]=[g("添加标签",-1)])]),_:1},8,["onClick"]))])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","model-value"])}const oe=V(ee,[["render",se],["__scopeId","data-v-03402c12"]]),ae=Object.freeze(Object.defineProperty({__proto__:null,default:oe},Symbol.toStringTag,{value:"Module"}));export{oe as A,U as a,Z as b,ae as c,q as s};
