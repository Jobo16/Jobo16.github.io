import{a as b}from"./index-CMEOwaIq.js";import{_ as v,r as s,a as h,o as g,c as q,w as m,d as w,e as a,j as n,k as u,t as x,P as k}from"../index-DYxDfolO.js";const N={name:"",components:{},props:{id:{type:[String,Number],required:!0}},data(){return{query:{pageNum:1,pageSize:10,robotId:this.id},total:0,list:[],loading:!1,typeDict:{text:"文本",image:"图片",news:"图文",video:"视频",file:"文件"}}},computed:{},watch:{},created(){this.getList()},mounted(){},methods:{getList(e){e&&(this.query.pageNum=e),this.loading=!0,b.getList(this.query).then(({rows:t,data:r,total:p})=>{this.list=t||r||[],this.total=+p}).finally(()=>{this.loading=!1})},edit(e){this.form=Object.assign({},e||{}),e.weMessageTemplate||(e.weMessageTemplate=e),this.$emit("edit",e)}}};function T(e,t,r,p,i,c){const l=s("el-table-column"),d=s("el-button"),_=s("el-table"),f=s("pagination"),y=h("loading");return g(),q("div",null,[m((g(),w(_,{data:i.list},{default:a(()=>[n(l,{label:"消息标题",align:"center",prop:"msgTitle"}),n(l,{prop:"msgType",label:"类型",align:"center"},{default:a(({row:o})=>[u(x(i.typeDict[o.msgType]),1)]),_:1}),n(l,{label:"发送时间",align:"center",prop:"sendTime"}),n(l,{label:"操作",align:"center"},{default:a(({row:o})=>[n(d,{text:"",onClick:S=>e.$emit("edit",o)},{default:a(()=>[...t[3]||(t[3]=[u("详情",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[y,i.loading]]),m(n(f,{style:{"text-align":"center"},class:"mt20",total:i.total,background:!1,layout:"prev, pager, next",page:i.query.pageNum,"onUpdate:page":t[0]||(t[0]=o=>i.query.pageNum=o),limit:i.query.pageSize,"onUpdate:limit":t[1]||(t[1]=o=>i.query.pageSize=o),onPagination:t[2]||(t[2]=o=>c.getList())},null,8,["total","page","limit"]),[[k,i.total>0]])])}const L=v(N,[["render",T]]);export{L as default};
