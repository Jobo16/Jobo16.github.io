import{H as A,c as v,j as t,G as D,e as o,C as k,D as E,r as d,o as p,i as m,k as r,F as K,h as L,d as f,f as g}from"../index-DYxDfolO.js";import{g as O}from"./api-Cs4n06ku.js";const{get:j,post:z,put:ee,delt:F}=A,_="/kf",G=s=>j(`${_}/findAll`,s),R=s=>F(`${_}/${s}`),H=s=>z(`${_}/saveOrUpdateKf`,s),J=["_"],W={class:"mid-action mb0"},X={class:"--Padding --RadiusSmall bg-(--BgBlack9)"},le={__name:"list",props:{isSelect:{type:Boolean,default:!1},isSigleSelect:{type:Boolean,default:!1}},setup(s){const C=E([]);return(function(){O().then(({data:e})=>{C.value=e,console.log(e)}).finally(()=>{})})(),(n,e)=>{const S=d("el-input"),u=d("el-form-item"),U=d("el-button"),h=d("Upload"),$=d("TextareaExtend"),T=d("el-option"),q=d("el-select"),w=d("el-radio"),B=d("el-radio-group"),N=d("SelectStaff"),b=d("el-image"),Q=d("SelectStaffQrCode"),I=d("BaDialog"),c=d("el-table-column"),P=d("el-popover"),y=d("TableOperateBtn"),x=d("RequestChartTable");return p(),v("div",{_:n.$store.setBusininessDesc("<div>微信客服支持企业在微信内、外各场景中接入，由用户发起咨询，企业进行回复</div>")},[t(x,{ref:"rctRef",isSigleSelect:s.isSigleSelect,request:k(G),searchBtnType:"icon",onSelectionChange:e[3]||(e[3]=i=>n.$emit("selectionChange",s.isSigleSelect?i==null?void 0:i[0]:i))},D({query:o(({query:i})=>[t(u,{label:"客服名称",prop:"kfName"},{default:o(()=>[t(S,{modelValue:i.kfName,"onUpdate:modelValue":l=>i.kfName=l,placeholder:"请输入",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),table:o(({data:i})=>[t(c,{prop:"kfName",label:"客服名称"}),t(c,{prop:"complainUserPhone",label:"客服二维码"},{default:o(({row:l})=>[t(P,{placement:"bottom",trigger:"hover"},{reference:o(()=>[t(b,{src:l.kfQrUrl,style:{width:"50px"}},null,8,["src"])]),default:o(()=>[t(b,{src:l.kfQrUrl,style:{width:"200px"}},null,8,["src"])]),_:2},1024)]),_:1}),t(c,{prop:"kfUrl",label:"客服链接"}),t(c,{prop:"updateTime",label:"最近更新时间"}),s.isSelect?g("",!0):(p(),f(c,{key:0,label:"操作",width:"280",fixed:"right"},{default:o(({row:l})=>[t(y,{type:"",onClick:a=>n.$refs.dialogRef.action(l)},{default:o(()=>[...e[14]||(e[14]=[r("编辑",-1)])]),_:1},8,["onClick"]),t(y,{type:"",onClick:a=>n.$sdk.downloadBlob(l.kfQrUrl,l.kfName+".png","image")},{default:o(()=>[...e[15]||(e[15]=[r(" 二维码下载 ",-1)])]),_:1},8,["onClick"]),t(y,{type:"",onClick:a=>n.$refs.rctRef.apiConfirm(k(R),l.id)},{default:o(()=>[...e[16]||(e[16]=[r("删除",-1)])]),_:1},8,["onClick"])]),_:1}))]),_:2},[s.isSelect?void 0:{name:"operation",fn:o(({apiConfirm:i})=>[m("div",W,[t(U,{type:"primary",onClick:e[0]||(e[0]=l=>n.$refs.dialogRef.action())},{default:o(()=>[...e[4]||(e[4]=[r("新建客服",-1)])]),_:1}),t(U,{type:"primary",plain:"",onClick:l=>i(k(R))},{default:o(()=>[...e[5]||(e[5]=[r("批量删除",-1)])]),_:1},8,["onClick"])]),t(I,{ref:"dialogRef",dynamicTitle:"客服",width:"630",formProps:{"label-width":"100px"},rules:{kfName:n.$sdk.ruleRequiredBlur,kfPicUrl:n.$sdk.ruleRequiredChange,welcomeMsg:n.$sdk.ruleRequiredBlur,kid:n.$sdk.ruleRequiredChange,switchType:n.$sdk.ruleRequiredChange,switchText:n.$sdk.ruleRequiredBlur,switchUserIds:n.$sdk.ruleRequiredChange,swichQrUrl:n.$sdk.ruleRequiredChange},onConfirm:e[2]||(e[2]=()=>n.$refs.dialogRef.confirm(k(H),n.$refs.rctRef.getList))},{form:o(({form:l})=>[t(u,{prop:"kfName",label:"客服名称"},{default:o(()=>[t(S,{modelValue:l.kfName,"onUpdate:modelValue":a=>l.kfName=a,placeholder:"请输入",maxlength:"15","show-word-limit":"",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(u,{prop:"kfPicUrl",label:"客服头像"},{default:o(()=>[t(h,{fileUrl:l.kfPicUrl,"onUpdate:fileUrl":a=>l.kfPicUrl=a,type:"image"},{tip:o(()=>[...e[6]||(e[6]=[m("div",null,"建议大小 2M 以内，仅支持 png/jpg 等图片类型",-1)])]),_:1},8,["fileUrl","onUpdate:fileUrl"])]),_:2},1024),t(u,{prop:"welcomeMsg",required:"",label:"欢迎语"},{default:o(()=>[t($,{modelValue:l.welcomeMsg,"onUpdate:modelValue":a=>l.welcomeMsg=a,maxlength:"200","show-word-limit":"",placeholder:"请输入",autosize:{minRows:5,maxRows:20},clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(u,{label:"客服知识库",prop:"kid"},{default:o(()=>[t(q,{modelValue:l.kid,"onUpdate:modelValue":a=>l.kid=a,"popper-append-to-body":!1},{default:o(()=>[(p(!0),v(K,null,L(k(C),(a,V)=>(p(),f(T,{key:V,label:a.kname,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(u,{label:"",required:"",prop:"switchType"},{default:o(()=>[m("div",X,[e[13]||(e[13]=m("div",null,"当知识库无匹配数据时：",-1)),t(B,{modelValue:l.switchType,"onUpdate:modelValue":a=>l.switchType=a,class:""},{default:o(()=>[t(w,{value:1},{default:o(()=>[...e[7]||(e[7]=[r("文字回复",-1)])]),_:1}),t(w,{value:2},{default:o(()=>[...e[8]||(e[8]=[r("转人工",-1)])]),_:1}),t(w,{value:3},{default:o(()=>[...e[9]||(e[9]=[r("员工活码",-1)])]),_:1}),t(w,{value:4},{default:o(()=>[...e[10]||(e[10]=[r("AI 大模型回复",-1)])]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue"]),l.switchType==1?(p(),f(u,{key:0,label:"",required:"",prop:"switchText"},{default:o(()=>[t($,{modelValue:l.switchText,"onUpdate:modelValue":a=>l.switchText=a,maxlength:"200","show-word-limit":"",placeholder:"请输入",autosize:{minRows:5,maxRows:20},clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):g("",!0),l.switchType==2?(p(),f(u,{key:1,label:"",required:"",prop:"switchUserIds"},{default:o(()=>[t(N,{modelValue:l.switchUserIds&&{userId:l.switchUserIds},multiple:!1,"onUpdate:modelValue":a=>(l.switchUserIds=a.userId,l.switchUserNames=a.name),title:"选择员工"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):g("",!0),l.switchType==3?(p(),f(u,{key:2,label:"",required:"",prop:"swichQrUrl"},{default:o(()=>[m("div",null,[t(U,{type:"primary",plain:"",onClick:e[1]||(e[1]=a=>n.$refs.SelectStaffQrCodeRef.dialogRef.visible=!0)},{default:o(()=>[...e[11]||(e[11]=[r(" 选择活码 ",-1)])]),_:1}),e[12]||(e[12]=m("br",null,null,-1)),l.swichQrUrl?(p(),f(b,{key:0,class:"w-[200px] mt10",src:l.swichQrUrl},null,8,["src"])):g("",!0),t(Q,{isSigleSelect:"","append-to-body":"",width:"800",ref:"SelectStaffQrCodeRef",title:"选择活码",onConfirm:({visible:a,loading:V,selected:M})=>(l.swichQrUrl=M[0].codeUrl,a.value=!1,V.value=!1)},null,8,["onConfirm"])])]),_:2},1024)):g("",!0)])]),_:2},1024)]),_:1},8,["rules"])]),key:"0"}]),1032,["isSigleSelect","request"])],8,J)}}};export{le as default};
