import{H as j,c as _,i as r,d as k,A as K,f as W,j as l,e as s,G as Q,C as u,r as i,D as V,V as X,o as p,F as O,h as L,l as Y,t as T,k as m}from"../index-DYxDfolO.js";const{get:c,post:Z,put:ke,delt:ee}=j,C="/hotWord",I=t=>c(`${C}/findHotWord`,t),oe=t=>c(`${C}/findSvipGroupTplById/${t}`),P=t=>Z(`${C}/saveOrUpdate`,t),R=t=>ee(`${C}/${t}`),v="/analysisHotWord",te=()=>c(`${v}/findHotWordTab`),le=t=>c(`${v}/hotWordTop5`,t),ne=t=>c(`${v}/hotWordCategoryTop5`,t),ae=t=>c(`${v}/findAll`,t),se=t=>c(`${v}/aiHotWordAnalysis`,t),We=Object.freeze(Object.defineProperty({__proto__:null,aiHotWordAnalysis:se,del:R,findAll:ae,getDetail:oe,getList:I,getStatistic:te,hotWordCategoryTop5:ne,hotWordTop5:le,save:P},Symbol.toStringTag,{value:"Module"})),{get:ie,post:re,put:Ve,delt:de}=j,w="/category",ue=t=>ie(`${w}/findCategory`,t),pe=t=>re(`${w}/saveOrUpdate`,t),ce=t=>de(`${w}/${t}`),fe={class:"g-left-right"},me={class:"left g-card"},ge={class:"title"},_e=["onClick"],ve={class:"name"},ye={key:0,class:"hidden group-hover:flex"},$e={class:"right"},be={class:"mid-action mb0"},Ce={__name:"index",props:{isSelect:{type:Boolean,default:!1}},setup(t){const f=V({}),h=V([]);function y(a){ue().then(({data:e})=>{h.value=e,(a||!f.value.categoryId)&&S(e[0])})}y(!0);const H=V();function S(a){f.value.categoryId=a==null?void 0:a.id,X(()=>{H.value.getList(1)})}function A(a){$sdk.confirm().then(()=>{this.loading=!0,ce(a.id).then(()=>{a.id==f.value.categoryId?(f.value.categoryId=void 0,y(!0)):y(),$sdk.msgSuccess()}).finally(()=>this.loading=!1)})}return(a,e)=>{const D=i("el-icon-plus"),E=i("el-icon-EditPen"),N=i("el-icon-delete"),z=i("el-scrollbar"),$=i("el-input"),g=i("el-form-item"),B=i("BaDialog"),U=i("el-button"),G=i("CommonTopRight"),b=i("el-table-column"),M=i("TagEllipsis"),q=i("TableOperateBtn"),F=i("RequestChartTable"),x=i("el-option"),J=i("el-select");return p(),_("div",null,[r("div",fe,[r("div",me,[r("div",ge,[e[6]||(e[6]=r("div",{class:"title-name"},"热词分类",-1)),t.isSelect?W("",!0):(p(),k(D,{key:0,class:"hoverColor",onClick:e[0]||(e[0]=K(o=>a.$refs.dialogRef.action(),["stop"])),title:"新增"}))]),l(z,{class:"item-list"},{default:s(()=>[(p(!0),_(O,null,L(u(h),(o,n)=>(p(),_("div",{class:Y(["item group",{active:o.id==u(f).categoryId}]),key:o.id,onClick:d=>S(o)},[r("div",ve,T(o.name),1),!t.isSelect&&o.id!=0?(p(),_("div",ye,[l(E,{class:"hoverColor",onClick:d=>a.$refs.dialogRef.action(o),title:"编辑"},null,8,["onClick"]),l(N,{class:"hoverColor",onClick:d=>A(o),title:"删除"},null,8,["onClick"])])):W("",!0)],10,_e))),128))]),_:1}),l(B,{ref:"dialogRef",dynamicTitle:"分类",width:"500",formProps:{"label-width":"auto"},rules:{name:[a.$sdk.ruleRequiredBlur]},onConfirm:e[1]||(e[1]=({form:o})=>a.$refs.dialogRef.confirm(pe,y))},{form:s(({form:o})=>[l(g,{prop:"name",class:"w100",label:"分类名称","show-word-limit":"",maxlength:"10"},{default:s(()=>[l($,{modelValue:o.name,"onUpdate:modelValue":n=>o.name=n,placeholder:"请输入",clearable:""},null,8,["modelValue","onUpdate:modelValue"]),e[7]||(e[7]=r("div",{class:"g-tip"},"分类名称不允许重复",-1))]),_:2},1024)]),_:1},8,["rules"])]),r("div",$e,[l(F,{ref_key:"rctRef",ref:H,isCreateRequest:!1,request:o=>(Object.assign(o,u(f)),u(I)(o)),onSelectionChange:e[4]||(e[4]=o=>a.$emit("selectionChange",o))},Q({query:s(({query:o})=>[l(g,{label:"热词名称",prop:"hotWord"},{default:s(()=>[l($,{modelValue:o.hotWord,"onUpdate:modelValue":n=>o.hotWord=n,placeholder:"请输入",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),table:s(({data:o})=>[l(b,{label:"热词名称","min-width":"100",prop:"hotWord","show-overflow-tooltip":""}),l(b,{label:"热词相近词",prop:"nearHotWord","min-width":"160px"},{default:s(({row:n})=>[l(M,{list:n.nearHotWord,emptyText:""},null,8,["list"])]),_:1}),l(b,{label:"最近更新",prop:"updateTime",width:"180"},{default:s(({row:n})=>[m(T(n.updateBy)+" ",1),e[10]||(e[10]=r("br",null,null,-1)),m(" "+T(n.updateTime),1)]),_:1}),t.isSelect?W("",!0):(p(),k(b,{key:0,label:"操作",fixed:"right",width:"220"},{default:s(({row:n})=>[l(q,{type:"edit",onClick:d=>a.$refs.dialogHotWordRef.action(n)},{default:s(()=>[...e[11]||(e[11]=[m("编辑",-1)])]),_:1},8,["onClick"]),l(q,{type:"delete",onClick:d=>a.$refs.rctRef.apiConfirm(u(R),n.id)},{default:s(()=>[...e[12]||(e[12]=[m("删除",-1)])]),_:1},8,["onClick"])]),_:1}))]),_:2},[t.isSelect?void 0:{name:"operation",fn:s(({selectedIds:o})=>[r("div",be,[l(G,null,{default:s(()=>[l(U,{type:"primary",onClick:e[2]||(e[2]=n=>a.$refs.dialogHotWordRef.action())},{default:s(()=>[...e[8]||(e[8]=[m("新建热词",-1)])]),_:1})]),_:1}),l(U,{type:"primary",plain:"",disabled:!(o!=null&&o.length),onClick:e[3]||(e[3]=n=>{var d;return(d=a.$refs.rctRef)==null?void 0:d.apiConfirm(u(R))})},{default:s(()=>[...e[9]||(e[9]=[m(" 删除 ",-1)])]),_:1},8,["disabled"])])]),key:"0"}]),1032,["request"]),l(B,{ref:"dialogHotWordRef",dynamicTitle:"热词",width:"500",formProps:{"label-width":"auto"},rules:{categoryId:[a.$sdk.ruleRequiredChange],hotWord:[a.$sdk.ruleRequiredBlur]},onConfirm:e[5]||(e[5]=({form:o})=>a.$refs.dialogHotWordRef.confirm(u(P),a.$refs.rctRef.getList))},{form:s(({form:o})=>[l(g,{label:"热词分类",prop:"categoryId"},{default:s(()=>[l(J,{modelValue:o.categoryId,"onUpdate:modelValue":n=>o.categoryId=n,"popper-append-to-body":!1},{default:s(()=>[(p(!0),_(O,null,L(u(h),(n,d)=>(p(),k(x,{key:d,label:n.name,value:n.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(g,{prop:"hotWord",label:"热词名称","show-word-limit":"",maxlength:"10"},{default:s(()=>[l($,{modelValue:o.hotWord,"onUpdate:modelValue":n=>o.hotWord=n,placeholder:"请输入",clearable:""},null,8,["modelValue","onUpdate:modelValue"]),e[13]||(e[13]=r("div",{class:"g-tip"},"分类名称不允许重复",-1))]),_:2},1024),l(g,{prop:"nearHotWord",label:"热词相近词","show-word-limit":"",maxlength:"10"},{default:s(()=>[l($,{modelValue:o.nearHotWord,"onUpdate:modelValue":n=>o.nearHotWord=n,placeholder:"请输入",clearable:""},null,8,["modelValue","onUpdate:modelValue"]),e[14]||(e[14]=r("div",{class:"g-tip"},"多个相近词时用英文逗号隔开",-1))]),_:2},1024)]),_:1},8,["rules"])])])])}}},Te=Object.freeze(Object.defineProperty({__proto__:null,default:Ce},Symbol.toStringTag,{value:"Module"}));export{Ce as _,We as a,ue as b,ne as c,ae as f,te as g,le as h,Te as i};
