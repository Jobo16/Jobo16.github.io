import{d as B,s as q,a as F,b as D,c as U,e as x,u as L}from"./api-Cs4n06ku.js";import{s as N,c as E,j as e,e as l,C as r,r as n,a as I,o as y,k as u,K as C,i as O,w as j,d as A,D as f}from"../index-DYxDfolO.js";const K=["_"],P={class:"mid-action mb0"},H=N({__name:"index",setup(S){let m=f(""),c=f(),b=f(""),_=f(!1),R=f();function V(){let o=new FormData;o.append("file",c.value),o.append("kid",m.value),_.value=!0,L(o).then(t=>{var p;t.code==200?($sdk.msgSuccess(),(p=R.value)==null||p.getList()):(_.value=!1,$sdk.msgError("上传失败，请稍后再试"))}).catch(t=>{$sdk.msgError("上传失败，请稍后再试")}).finally(()=>{_.value=!1})}return(o,t)=>{const p=n("el-input"),k=n("el-form-item"),$=n("el-button"),v=n("BaDialog"),i=n("el-table-column"),g=n("TableOperateBtn"),h=n("RequestChartTable"),w=n("el-upload"),T=I("loading");return y(),E("div",{_:o.$store.setBusininessDesc("<div>查看所有客服场景中客户咨询的详细记录</div>")},[e(h,{ref:"rctRef",request:r(F),searchBtnType:"icon"},{query:l(({query:s})=>[e(k,{label:"知识库名称",prop:"kname"},{default:l(()=>[e(p,{modelValue:s.kname,"onUpdate:modelValue":a=>s.kname=a,placeholder:"请输入",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),operation:l(({selectedIds:s})=>[O("div",P,[e($,{type:"primary",onClick:t[0]||(t[0]=a=>o.$refs.dialogRef.action())},{default:l(()=>[...t[2]||(t[2]=[u("新建",-1)])]),_:1})]),e(v,{ref:"dialogRef",dynamicTitle:"知识库",width:"500",formProps:{"label-width":"100px"},rules:{users:{required:!0,message:"必选项",trigger:"change"}},onConfirm:t[1]||(t[1]=()=>o.$refs.dialogRef.confirm(r(q),o.$refs.rctRef.getList))},{form:l(({form:a})=>[e(k,{prop:"kname",label:"知识库名称"},{default:l(()=>[e(p,{modelValue:a.kname,"onUpdate:modelValue":d=>a.kname=d,maxlength:"15",placeholder:"请输入","show-word-limit":"",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(k,{prop:"description",label:"知识库描述"},{default:l(()=>[e(p,{type:"textarea",modelValue:a.description,"onUpdate:modelValue":d=>a.description=d,maxlength:"200",placeholder:"请输入","show-word-limit":"",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:1},512)]),table:l(({data:s})=>[e(i,{label:"知识库名称","min-width":"200",prop:"kname"}),e(i,{label:"知识库描述","min-width":"100",prop:"description"}),e(i,{label:"创建时间","min-width":"200",prop:"createTime"}),e(i,{label:"操作",fixed:"right",width:"130"},{default:l(({row:a})=>[e(g,{isText:"",onClick:d=>o.$refs.rctRef.apiConfirm(r(B),a.id)},{default:l(()=>[...t[3]||(t[3]=[u("删除",-1)])]),_:1},8,["onClick"]),e(g,{isText:"",onClick:d=>{o.$refs.dialogRefFile.visible=!0,C(m)?m.value=a.id:m=a.id}},{default:l(()=>[...t[4]||(t[4]=[u(" 附件 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["request"]),e(v,{ref:"dialogRefFile",title:"知识库附件",width:"1000",isFooter:!1},{default:l(()=>[e(h,{ref_key:"rctRefFile",ref:R,class:"pad0",request:r(D),params:{kid:r(m)},searchBtnType:"icon"},{operation:l(({query:s})=>[e(w,{"http-request":V,limit:1,"before-upload":a=>C(c)?c.value=a:c=a},{default:l(()=>[j((y(),A($,{type:"primary"},{default:l(()=>[...t[5]||(t[5]=[u("文件上传",-1)])]),_:1})),[[T,r(_)]])]),_:1},8,["before-upload"])]),table:l(({data:s})=>[e(i,{label:"文档编号",prop:"id"}),e(i,{label:"文档名称",prop:"docName"}),e(i,{label:"文档类型",prop:"docType"}),e(i,{label:"创建时间","min-width":"200",prop:"createTime"}),e(i,{label:"操作",fixed:"right",width:"130"},{default:l(({row:a})=>[e(g,{type:"",onClick:d=>o.$refs.rctRefFile.apiConfirm(r(U),a.id)},{default:l(()=>[...t[6]||(t[6]=[u("删除",-1)])]),_:1},8,["onClick"]),e(g,{type:"",onClick:d=>{o.$refs.dialogRefFragments.visible=!0,C(b)?b.value=a.id:b=a.id}},{default:l(()=>[...t[7]||(t[7]=[u(" 知识片段 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["request","params"])]),_:1},512),e(v,{ref:"dialogRefFragments",title:"知识片段",width:"1000",isFooter:!1},{default:l(()=>[e(h,{ref:"rct",request:r(x),params:{docId:r(b)},searchBtnType:"icon"},{table:l(({data:s})=>[e(i,{label:"片段编号",prop:"id"}),e(i,{label:"片段内容",prop:"content"})]),_:1},8,["request","params"])]),_:1},512)],8,K)}}});export{H as default};
