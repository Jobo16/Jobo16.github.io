import{H as B,_ as T,c as v,j as o,e as i,r,o as d,i as c,a as j,F as R,h as J,d as V,k as f,t as Y,w as P,P as E,f as H}from"../index-DYxDfolO.js";const{get:L,post:G,put:pe,delt:de}=B,S="/screenShot",K=l=>L(`${S}/findAll`,l),Q=l=>G(`${S}/synchInfo`,l),W=()=>L(`${S}/getScreenShotTypes`),q=Object.freeze(Object.defineProperty({__proto__:null,getList:K,getScreenShotTypes:W,synchInfo:Q},Symbol.toStringTag,{value:"Module"}));let{saveOrUpdateMsgRule:k}={};const X={props:{data:{}},data(){return{saveOrUpdateMsgRule:k}=q,{rules:{ruleContent:[{required:!0,message:"请输入规则内容",trigger:"blur"}]},form:{ruleType:2,id:null,ruleContent:""}}},created(){this.data!=null&&(console.log(this.data.id),console.log(this.data.ruleContent),this.form.ruleContent=this.data.ruleContent,this.form.id=this.data.id)},methods:{async submit(){if(!await this.$refs.form.validate())return;let e=JSON.parse(JSON.stringify(this.form));k(e).then(({data:n})=>{this.msgSuccess("操作成功")}).finally(()=>{this.$store.loading=!1})}}},Z={class:""};function ee(l,e,n,a,t,u){const m=r("el-input"),p=r("el-form-item"),g=r("el-form");return d(),v("div",Z,[o(g,{ref:"form",rules:t.rules,model:t.form,"label-position":"right","label-width":"100px","scroll-into-view-options":!0},{default:i(()=>[o(p,{label:"规则内容",prop:"ruleContent"},{default:i(()=>[o(m,{type:"textarea",rows:4,modelValue:t.form.ruleContent,"onUpdate:modelValue":e[0]||(e[0]=h=>t.form.ruleContent=h),maxlength:"100","show-word-limit":"",clearable:"",placeholder:"请输入"},null,8,["modelValue"]),e[1]||(e[1]=c("br",null,null,-1)),e[2]||(e[2]=c("span",{style:{color:"#f00","font-size":"12px"}}," 请清晰填写相关规则 ",-1))]),_:1})]),_:1},8,["rules","model"])])}const te=T(X,[["render",ee]]);let{synchInfo:w}={};const le={props:{data:{}},data(){return{synchInfo:w}=q,{rules:{time:[{required:!0,message:"请输入同步的数据日期",trigger:"blur"}]},form:{time:null}}},methods:{formatDate(l){const e=l.getFullYear(),n=(l.getMonth()+1).toString().padStart(2,"0"),a=l.getDate().toString().padStart(2,"0");return`${e}-${n}-${a}`},async submit(){var e,n;let l=await this.$refs.form.validate();console.log(l),l&&w({startTime:this.formatDate((e=this.form.time)==null?void 0:e[0]),endTime:this.formatDate((n=this.form.time)==null?void 0:n[1])}).then(({data:a})=>{this.msgSuccess("操作成功")}).finally(()=>{this.$store.loading=!1})}}},oe={class:""};function se(l,e,n,a,t,u){const m=r("el-date-picker"),p=r("el-form-item"),g=r("el-form");return d(),v("div",oe,[o(g,{ref:"form",rules:t.rules,model:t.form,"label-position":"right","label-width":"100px","scroll-into-view-options":!0},{default:i(()=>[o(p,{label:"时间:",prop:"time","aria-required":"true"},{default:i(()=>[o(m,{modelValue:t.form.time,"onUpdate:modelValue":e[0]||(e[0]=h=>t.form.time=h),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"]),e[1]||(e[1]=c("br",null,null,-1)),e[2]||(e[2]=c("span",{style:{color:"#f00","font-size":"12px"}}," 开始日期与结束日期不可超过14天 ",-1))]),_:1})]),_:1},8,["rules","model"])])}const ie=T(le,[["render",se]]);let{getList:x,synchMsg:D,getScreenShotTypes:A}={};const re={data(){return{getList:x,synchMsg:D,getScreenShotTypes:A}=q,{activeName:"first",list:"",aiList:"",aiRuleList:"",total:0,multipleSelection:[],loading:!1,dialogVisible:!1,dialogAiVisible:!1,form:{},queryParmTime:null,queryParm:{userType:null,shotType:null,time:null,page:1,size:10},options:[],xData:[],series:[],tabCount:{},options:[],sourceOptions:[],userTypeptions:[{key:"微信用户",val:1},{key:"企微用户",val:2},{key:"企业员工",val:3}]}},components:{aev:te,synch:ie},watch:{},created(){this.getOperations(),this.getList()},mounted(){},methods:{openDialog(){this.dialogAiVisible=!0},getOperations(){A().then(l=>{this.options=l.data,console.log(l.data)})},getList(){var l,e,n,a,t,u;this.$store.loading=!0,console.log((l=this.queryParmTime)==null?void 0:l[0]),console.log((e=this.queryParmTime)==null?void 0:e[1]),(n=this.queryParmTime)!=null&&n[0]&&((a=this.queryParmTime)!=null&&a[1])&&(this.queryParm.startTime=this.formatDate((t=this.queryParmTime)==null?void 0:t[0]),this.queryParm.endTime=this.formatDate((u=this.queryParmTime)==null?void 0:u[1])),x(this.queryParm).then(m=>{this.list=m.data,this.total=m.count,this.multipleSelection=[]}).catch(m=>console.error(m)).finally(()=>this.$store.loading=!1)},submit(){this.loading=!0,this.$refs.aev.submit().then(()=>(this.dialogVisible=!1,this.findMsgRules())).catch(l=>console.error(l)).finally(()=>this.loading=!1)},synchChatMsg(){D().then(l=>{this.msgSuccess(l.msg)}).catch(l=>console.error(l)).finally(()=>this.$store.loading=!1)},restting(){this.queryParm.userType=null,this.queryParm.shotType=null,this.queryParmTime=null,this.getList()},formatDate(l){const e=l.getFullYear(),n=(l.getMonth()+1).toString().padStart(2,"0"),a=l.getDate().toString().padStart(2,"0");return`${e}-${n}-${a}`},submitAiVisible(){this.loading=!0,this.$refs.synch.submit().then(()=>{this.dialogAiVisible=!1}).catch(l=>console.error(l)).finally(()=>this.loading=!1)}}},ne={class:"g-card"},ae={class:"fxbw"};function me(l,e,n,a,t,u){const m=r("el-date-picker"),p=r("el-form-item"),g=r("el-option"),h=r("el-select"),y=r("el-button"),N=r("el-form"),_=r("el-table-column"),O=r("el-table"),U=r("pagination"),M=r("synch"),z=r("el-dialog"),F=r("el-tabs"),$=j("loading");return d(),v("div",null,[o(F,{modelValue:t.activeName,"onUpdate:modelValue":e[9]||(e[9]=s=>t.activeName=s)},{default:i(()=>[c("div",ne,[o(N,{class:"searchForm",ref:"searchForm",model:l.query2,"label-width":"",inline:""},{default:i(()=>[o(p,{label:"时间:"},{default:i(()=>[o(m,{modelValue:t.queryParmTime,"onUpdate:modelValue":e[0]||(e[0]=s=>t.queryParmTime=s),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),_:1}),o(p,{label:"截屏类型:",prop:"value1"},{default:i(()=>[o(h,{modelValue:t.queryParm.shotType,"onUpdate:modelValue":e[1]||(e[1]=s=>t.queryParm.shotType=s),"collapse-tags":"","collapse-tags-tooltip":"","max-collapse-tags":2,placeholder:"全部",style:{width:"260px"}},{default:i(()=>[(d(!0),v(R,null,J(t.options,s=>(d(),V(g,{key:s.value,label:s.value,value:s.subCode},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(p,null,{default:i(()=>[o(y,{type:"primary",onClick:u.getList},{default:i(()=>[...e[10]||(e[10]=[f("查询",-1)])]),_:1},8,["onClick"]),o(y,{onClick:u.restting},{default:i(()=>[...e[11]||(e[11]=[f("重置",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"]),c("div",ae,[o(y,{type:"primary",onClick:e[2]||(e[2]=s=>{t.form={},t.dialogAiVisible=!0})},{default:i(()=>[...e[12]||(e[12]=[f("同步",-1)])]),_:1})]),o(O,{data:t.list,"tooltip-effect":"dark","highlight-current-row":"",onSelectionChange:e[3]||(e[3]=s=>t.multipleSelection=s.map(b=>b.id))},{default:i(()=>[o(_,{label:"截屏操作时间",prop:"operateTime"}),o(_,{label:"操作人",prop:"userName"}),o(_,{label:"截屏类型",prop:"operateType"},{default:i(({row:s})=>{var b,C;return[f(Y((C=(b=t.options)==null?void 0:b.find(I=>I.subCode==s.shotType))==null?void 0:C.value),1)]}),_:1}),o(_,{label:"截屏内容",prop:"shotContent"}),o(_,{label:"操作系统",prop:"systemOs"})]),_:1},8,["data"]),P(o(U,{total:t.total,page:t.queryParm.page,"onUpdate:page":e[4]||(e[4]=s=>t.queryParm.page=s),limit:t.queryParm.size,"onUpdate:limit":e[5]||(e[5]=s=>t.queryParm.size=s),onPagination:e[6]||(e[6]=s=>u.getList())},null,8,["total","page","limit"]),[[E,t.total>0]]),o(z,{title:"同步",modelValue:t.dialogAiVisible,"onUpdate:modelValue":e[8]||(e[8]=s=>t.dialogAiVisible=s),width:"80%","close-on-click-modal":!1},{footer:i(()=>[o(y,{onClick:e[7]||(e[7]=s=>t.dialogAiVisible=!1)},{default:i(()=>[...e[13]||(e[13]=[f("取消",-1)])]),_:1}),P((d(),V(y,{type:"primary",onClick:u.submitAiVisible},{default:i(()=>[...e[14]||(e[14]=[f("确定",-1)])]),_:1},8,["onClick"])),[[$,t.loading]])]),default:i(()=>[t.dialogAiVisible?(d(),V(M,{key:0,data:t.form,ref:"synch"},null,8,["data"])):H("",!0)]),_:1},8,["modelValue"])])]),_:1},8,["modelValue"])])}const fe=T(re,[["render",me],["__scopeId","data-v-955a785d"]]);export{fe as default};
