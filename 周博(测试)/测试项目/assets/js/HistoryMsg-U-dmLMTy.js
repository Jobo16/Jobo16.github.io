import{a as c}from"./index-CyLDBSxo.js";import{_ as x,r,a as k,o as g,c as q,w as d,d as f,e as l,j as s,k as u,t as y,f as N,P as C}from"../index-DYxDfolO.js";const S={name:"",components:{},props:{id:{type:[String,Number],required:!0}},data(){return{query:{pageNum:1,pageSize:10,title:"",status:"",agentId:this.id},total:0,list:[],loading:!1,status:{"":"全部状态",0:"草稿",1:"待发送",2:"已发送",3:"发送失败",4:"已撤回"},typeDict:{text:"文本",image:"图片",news:"图文",video:"视频",file:"文件"},form:{}}},computed:{},watch:{},created(){this.getList()},mounted(){},methods:{getList(n){n&&(this.query.pageNum=n),this.loading=!0,c.getList(this.query).then(({data:t,count:a})=>{this.list=t,this.total=+a}).finally(()=>{this.loading=!1})},edit(n,t){this.$emit("edit",n,t)},removke(n,t,a){this.$confirm("是否确认"+a+"？该操作不可撤销，请谨慎操作。",{title:"警告",confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return c[t](n)}).then(()=>{this.getList(),this.msgSuccess("删除成功")})},resetQuery(){this.query.status="",this.getList(1)}}};function T(n,t,a,L,i,p){const o=r("el-table-column"),m=r("el-button"),_=r("el-table"),b=r("pagination"),h=k("loading");return g(),q("div",null,[d((g(),f(_,{data:i.list},{default:l(()=>[s(o,{label:"消息标题",align:"center",prop:"msgTitle"}),s(o,{prop:"msgType",label:"类型",align:"center"},{default:l(({row:e})=>[u(y(i.typeDict[e.msgType]),1)]),_:1}),s(o,{prop:"status",label:"消息状态",align:"center"},{default:l(({row:e})=>[u(y(i.status[e.status]),1)]),_:1}),s(o,{label:"发送时间",align:"center",prop:"sendTime"}),s(o,{label:"操作",align:"center"},{default:l(({row:e})=>[s(m,{text:"",onClick:v=>p.edit(e,"detail")},{default:l(()=>[...t[3]||(t[3]=[u("详情",-1)])]),_:1},8,["onClick"]),["0","1"].includes(e.status+"")?(g(),f(m,{key:0,text:"",onClick:v=>p.edit(e,"edit")},{default:l(()=>[...t[4]||(t[4]=[u("编辑",-1)])]),_:1},8,["onClick"])):N("",!0)]),_:1})]),_:1},8,["data"])),[[h,i.loading]]),d(s(b,{style:{"text-align":"center"},class:"mt20",total:i.total,background:!1,layout:"prev, pager, next",page:i.query.pageNum,"onUpdate:page":t[0]||(t[0]=e=>i.query.pageNum=e),limit:i.query.pageSize,"onUpdate:limit":t[1]||(t[1]=e=>i.query.pageSize=e),onPagination:t[2]||(t[2]=e=>p.getList())},null,8,["total","page","limit"]),[[C,i.total>0]])])}const D=x(S,[["render",T]]);export{D as default};
