import{A as V,s as v,a as N}from"./AddTag-DyTLK-D_.js";import{_ as B,c,j as t,e as o,d as S,r as n,o as m,f as w,k as r,i as x}from"../index-DYxDfolO.js";const I={components:{AddTag:V},props:{},data(){return{api:N,loading:!1,dialogVisible:!1,form:{groupName:"",weTags:[]},newInput:"",newInputVisible:!1,rules:Object.freeze({groupName:[{required:!0,message:"必填项",trigger:"blur"}]}),multiple:!0}},computed:{},created(){},methods:{edit(u,e){this.form=JSON.parse(JSON.stringify(Object.assign({groupTagType:this.type,weTags:[]},u||{}))),this.dialogVisible=!0},syncTag(){this.$store.loading=!0,v().then(()=>{this.msgSuccess("后台开始同步数据，请稍后关注进度"),this.getList()}).finally(()=>{this.$store.loading=!1})}}},q={class:"customerTag"},R={class:"flex justify-between"},j={key:0};function A(u,e,O,E,l,d){const f=n("BaInput"),p=n("el-button"),b=n("ButtonSync"),g=n("el-table-column"),T=n("TagEllipsis"),_=n("RequestChartTable"),y=n("AddTag");return m(),c("div",q,[t(_,{ref:"rct",request:l.api.getList,searchBtnType:"icon"},{query:o(({query:s})=>[t(f,{label:"标签组名称",prop:"groupName",modelValue:s.groupName,"onUpdate:modelValue":a=>s.groupName=a},null,8,["modelValue","onUpdate:modelValue"])]),operate:o(({goRoute:s})=>[t(p,{type:"primary",onClick:e[0]||(e[0]=a=>d.edit())},{default:o(()=>[...e[3]||(e[3]=[r("新建标签组",-1)])]),_:1})]),operation:o(({goRoute:s,apiConfirm:a})=>[x("div",R,[t(b,{lastSyncTime:u.lastSyncTime,onClick:d.syncTag},{default:o(()=>[...e[4]||(e[4]=[r("同步企微标签",-1)])]),_:1},8,["lastSyncTime","onClick"]),t(p,{type:"danger",plain:"",onClick:i=>a(l.api.del)},{default:o(()=>[...e[5]||(e[5]=[r("批量删除",-1)])]),_:1},8,["onClick"])])]),table:o(({apiConfirm:s,goRoute:a})=>[t(g,{label:"标签组",align:"center",prop:"groupName"}),t(g,{label:"标签",align:"center",prop:"weTags"},{default:o(({row:i})=>[i.weTags?(m(),c("div",j,[t(T,{list:i.weTags},null,8,["list"])])):w("",!0)]),_:1}),t(g,{label:"操作",align:"center"},{default:o(({row:i,index:k})=>[t(p,{text:"",onClick:C=>d.edit(i,k)},{default:o(()=>[...e[6]||(e[6]=[r("编辑",-1)])]),_:1},8,["onClick"]),t(p,{text:"",onClick:C=>s(l.api.del,i.groupId)},{default:o(()=>[...e[7]||(e[7]=[r("删除",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:1},8,["request"]),(m(),S(y,{visible:l.dialogVisible,"onUpdate:visible":e[1]||(e[1]=s=>l.dialogVisible=s),form:l.form,key:l.dialogVisible,onSuccess:e[2]||(e[2]=s=>u.$refs.rct.getList(!l.form.groupId&&1)),module:"customerTag"},null,8,["visible","form"]))])}const J=B(I,[["render",A]]);export{J as default};
