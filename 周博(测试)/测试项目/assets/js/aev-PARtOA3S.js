const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/SelectStaffQrCode-DJQajaTq.js","assets/js/api-C-XKCTRs.js","assets/index-DYxDfolO.js","assets/css/index-DwPq-yKK.css","assets/js/SelectQrCode-0uXEcd8F.js","assets/js/api-DFlyeBOG.js","assets/js/SelectGetCustomerLink-Dx8hYOP_.js","assets/js/apiLink-6ym-kcZt.js","assets/css/SelectGetCustomerLink-De9eA_Gn.css"])))=>i.map(i=>d[i]);
import{s as re,R as ie,d as g,e as r,K as z,C as a,S as se,D as h,r as v,U as de,a as ue,o as t,j as n,k as b,f as i,w as A,c as u,i as s,F as w,h as j,l as V,t as m,P as ce,B as q,z as D,_ as pe}from"../index-DYxDfolO.js";import{a as ve,s as _e}from"./api-F1PvH9jC.js";import{_ as ge}from"./CodeLink-LbEFWaU2.js";const me={key:0,class:"g-top-step --MarginB"},ye={class:"flex-auto overflow-auto flex --Gap"},ke={key:0,class:"g-card flex-auto"},be={class:"g-card-title justify-between"},Ue={class:"--BgBlack8 --Padding --RadiusBig"},Ce={class:"flexWrap --Gap"},fe=["onClick"],Se={class:"g-card-title"},Be={class:"g-tip"},Ve={class:"g-card"},Te={class:"grid grid-cols-2 --Gap"},xe=["onClick"],$e={class:"g-card-title"},Re={class:"g-tip"},he={class:"g-card w-[415px]"},we={key:0,class:"g-tip text-center !mt-[180px]"},Fe={key:1,class:"h100 relative"},Ee={class:"h100 overflow-auto"},qe=["src"],De=["onClick"],He={class:"truncate weight5 font16"},Ie={class:"truncate my-[15px]"},Ge={class:"bgWhite text-center text-[red] weight5 pad10 --RadiusSmall"},Le=["onClick"],Oe={class:"mr10 flex items-center gap10"},Ne={class:"truncate weight5 font16"},Pe={class:"truncate mt15"},Qe={key:0,class:"g-card"},ze={key:0,class:"g-tip text-center !mt-[180px]"},Ae={key:1,class:"relative"},je={key:0},We={key:0,class:"truncate"},Je={key:1},Ke={key:2},Me={key:0,class:"truncate"},Xe={key:3},Ye=re({__name:"aev",setup(Ze){const W=q(()=>D(()=>import("./SelectStaffQrCode-DJQajaTq.js"),__vite__mapDeps([0,1,2,3]))),J=q(()=>D(()=>import("./SelectQrCode-0uXEcd8F.js"),__vite__mapDeps([4,5,2,3]))),K=q(()=>D(()=>import("./SelectGetCustomerLink-Dx8hYOP_.js"),__vite__mapDeps([6,7,2,3,8]))),H=h({}),F=de(),M=se(),x=ie(),U=h(0),c=h("img"),X={1:{label:"图片H5",desc:"上传落地页图片，快捷添加获客或咨询按钮，一键跳转"},5:{label:"更多类型开发中…",desc:"敬请期待…"}},Y={1:{label:"客服控件",desc:"客户一键快捷咨询"},2:{label:"活码控件",desc:"通过活码实现营销"},3:{label:"链接控件",desc:"通过跳转链接实现营销"}},y=h({type:1});(function(l=(_=>(_=M.query)==null?void 0:_.id)()){l&&(x.loading=!0,ve(l).then(({data:$})=>{Object.assign(y.value,$)}).finally(()=>{x.loading=!1}))})();function I(k,l){["controlUrl","controlSubType","title","titleSub","guideTip"].forEach(_=>{k[_]=void 0}),setTimeout(()=>l==null?void 0:l.formRef.clearValidate())}function G(){$sdk.confirm().then(()=>{y.value.controlType=void 0,c.value="img",I(y.value)})}async function Z(k,l){let _=JSON.parse(JSON.stringify(y.value));if(!_.backgroundUrl)return $sdk.msgError("请上传H5底图");if(await(l==null?void 0:l.formRef.validate())){if(c.value!="img"&&_.controlType){if(!_.controlUrl)return $sdk.msgError("请设置控件链接");if(!_.title)return $sdk.msgError("请设置主标题");if(!_.titleSub)return $sdk.msgError("请设置副标题");if([3,1].includes(+_.controlType)&&!_.guideTip)return $sdk.msgError("请设置按钮引导文案")}k(()=>_e(_),F.back)}}return(k,l)=>{const _=v("el-step"),$=v("BaSteps"),S=v("el-button"),ee=v("BaDialog"),E=v("BaForm"),le=v("CommonTopRight"),T=v("BaInput"),f=v("BaFormItem"),L=v("Upload"),O=v("el-iconCircleCloseFilled"),N=v("BaImage"),te=v("SelectCustomerService"),P=v("BaRadioGroup"),R=v("ElButton"),oe=v("el-form"),ae=v("BaFormBar"),ne=ue("loading");return t(),g(E,{class:"h100 flexCol",modelValue:a(y),"onUpdate:modelValue":l[9]||(l[9]=o=>z(y)?y.value=o:null),ref:"BaFormRef"},{default:r(({form:o,isDetail:C,formRef:Q})=>[C?i("",!0):(t(),u("div",me,[n($,{class:"w-[80%] mx-auto",active:a(U)},{default:r(()=>[n(_,{title:"基础信息",description:"设置H5基础信息"}),n(_,{title:"内容配置",description:"设置H5具体样式与内容"})]),_:1},8,["active"])])),s("div",ye,[a(U)==0||C?(t(),u("div",ke,[s("div",be,[l[12]||(l[12]=b(" 基础信息 ",-1)),C?(t(),g(le,{key:0},{default:r(()=>[n(E,{disabled:!1},{default:r(()=>[n(S,{type:"primary",plain:"",onClick:e=>a(F).push({path:"aev",query:{id:o.id}})},{default:r(()=>[...l[10]||(l[10]=[b(" 编辑 ",-1)])]),_:1},8,["onClick"]),n(S,{type:"primary",onClick:l[0]||(l[0]=e=>{H.value=a(y),k.$refs.shareDialogRef.visible=!0})},{default:r(()=>[...l[11]||(l[11]=[b(" 分享 ",-1)])]),_:1}),n(ee,{ref:"shareDialogRef",title:"H5分享",size:"666px"},{default:r(()=>[s("div",Ue,[n(a(ge),{data:a(H)},null,8,["data"])])]),_:1},512)]),_:2},1024)]),_:2},1024)):i("",!0)]),n(T,{label:"H5名称",prop:"name",required:"",modelValue:o.name,"onUpdate:modelValue":e=>o.name=e,maxlength:"15"},null,8,["modelValue","onUpdate:modelValue"]),n(f,{label:"H5类型",prop:"type",required:""},{default:r(()=>[s("div",Ce,[(t(),u(w,null,j(X,(e,p)=>(t(),u(w,{key:p},[!C||o.type==p?(t(),u("div",{key:0,class:V(["card w-[280px] g-card --RadiusSmall mt0 --BgBlack10 border --BorderBlack9 pointer",o.type==p&&"active"]),onClick:B=>p!=5&&(o.type=p)},[s("div",Se,m(e.label),1),s("div",Be,m(e.desc),1)],10,fe)):i("",!0)],64))),64))])]),_:2},1024)])):i("",!0),a(U)==1||C?(t(),u("div",{key:1,class:V(["grid",C||"flex-auto  grid-cols-[auto_415px_auto] --Gap"])},[A(s("div",Ve,[l[13]||(l[13]=s("div",{class:"g-card-title"},"自定义控件",-1)),s("div",Te,[(t(),u(w,null,j(Y,(e,p)=>(t(),u(w,{key:p},[!C||o.controlType==p?(t(),u("div",{key:0,class:V(["card g-card --RadiusSmall mt0 --BgBlack10 --BorderBlack9 pointer",o.controlType==p&&"active"]),onClick:B=>(o.controlType==+p||I(o,k.$refs.formControlRef),o.controlType=c.value=+p)},[s("div",$e,m(e.label),1),s("div",Re,m(e.desc),1)],10,xe)):i("",!0)],64))),64))]),l[14]||(l[14]=s("div",{class:"g-tip text-center !mt-[50px]"},"更多控件开发中…",-1))],512),[[ce,a(U)==1]]),s("div",he,[l[17]||(l[17]=s("div",{class:"g-card-title"},"H5预览",-1)),o.backgroundUrl?(t(),u("div",Fe,[s("div",Ee,[s("img",{class:V(["w-[100%] --RadiusSmall --BorderBlack11",a(c)=="img"&&"!border-(--Color)"]),src:o.backgroundUrl,fit:"fill",onClick:l[1]||(l[1]=e=>c.value="img")},null,10,qe)]),[3,1].includes(o.controlType)?(t(),u("div",{key:0,class:V(["h5Card absolute bottom-[20px] w-[90%] mx-[5%] g-card --BorderBlack9 --RadiusSmall --BgBlack10 !overflow-visible",a(c)==o.controlType&&"!border-(--Color)"]),onClick:e=>c.value=o.controlType},[[3,1].includes(a(c))?(t(),g(O,{key:0,class:"font18 absolute top-[-9px] right-[-9px] --Color pointer",onClick:l[2]||(l[2]=e=>G())})):i("",!0),s("div",He,m(o.title||"主标题"),1),s("div",Ie,m(o.titleSub||"副标题"),1),s("div",Ge,m(o.guideTip||"点击立即咨询 →"),1)],10,De)):i("",!0),o.controlType==2?(t(),u("div",{key:1,class:V(["h5Card absolute bottom-[20px] w-[90%] mx-[5%] g-card --BorderBlack9 --RadiusSmall --BgBlack10 !overflow-visible",a(c)==o.controlType&&"!border-(--Color)"]),onClick:e=>c.value=o.controlType},[[2].includes(a(c))?(t(),g(O,{key:0,class:"font18 absolute top-[-9px] right-[-9px] --Color pointer",onClick:l[3]||(l[3]=e=>G())})):i("",!0),s("div",Oe,[n(N,{class:"size-[76px] pad5 bgWhite flex-none --RadiusSmall",src:o.controlUrl,alt:""},null,8,["src"]),s("div",null,[s("div",Ne,m(o.title||"主标题"),1),s("div",Pe,m(o.titleSub||"副标题"),1)])])],10,Le)):i("",!0)])):(t(),u("div",we,[l[16]||(l[16]=s("div",null,"暂无图片",-1)),n(L,{fileUrl:o.backgroundUrl,"onUpdate:fileUrl":e=>o.backgroundUrl=e},{default:r(()=>[n(S,{class:"!mt-[60px]",type:"primary",plain:""},{default:r(()=>[...l[15]||(l[15]=[b("上传H5底图",-1)])]),_:1})]),_:1},8,["fileUrl","onUpdate:fileUrl"])]))]),a(U)==1?(t(),u("div",Qe,[l[18]||(l[18]=s("div",{class:"g-card-title"},"控件设置",-1)),o.backgroundUrl?(t(),u("div",Ae,[a(c)=="img"?(t(),g(f,{key:0,label:"H5底图",prop:"backgroundUrl",required:""},{default:r(()=>[n(L,{fileUrl:o.backgroundUrl,"onUpdate:fileUrl":e=>o.backgroundUrl=e},null,8,["fileUrl","onUpdate:fileUrl"])]),_:2},1024)):i("",!0),n(E,{modelValue:a(y),"onUpdate:modelValue":l[6]||(l[6]=e=>z(y)?y.value=e:null),ref:"formControlRef","label-position":"right",isOperate:!1},{default:r(({form:e,isDetail:p,formRef:B})=>[a(c)==1?(t(),u("div",je,[n(f,{label:"选择客服",prop:"controlUrl",required:""},{default:r(()=>[e.controlUrl?(t(),u("div",We,m(e.controlUrl),1)):i("",!0),n(S,{class:"!align-bottom",type:"primary",text:!!e.controlUrl,onClick:l[4]||(l[4]=d=>k.$refs.SelectCustomerServiceRef.dialogRef.visible=!0)},{default:r(()=>[b(m(e.controlUrl?"编辑":"选择客服"),1)]),_:2},1032,["text"]),n(te,{ref:"SelectCustomerServiceRef",isSigleSelect:"",onConfirm:({selected:d})=>(e.controlUrl=d.kfUrl,B.validateField("controlUrl"))},null,8,["onConfirm"])]),_:2},1024)])):i("",!0),a(c)==2?(t(),u("div",Je,[n(f,{label:"活码类型",prop:"controlSubType",required:""},{default:r(()=>[n(P,{modelValue:e.controlSubType,"onUpdate:modelValue":d=>e.controlSubType=d,options:[{label:"员工活码",value:1,desc:"扫码添加企业员工"},{label:"无限群码",value:2,desc:"扫码进入企业客群"}],onChange:d=>e.controlUrl=""},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024),n(f,{label:"选择活码",prop:"controlUrl",required:""},{default:r(()=>[e.controlUrl?(t(),g(N,{key:0,class:"mr10 size-[80px] --RadiusSmall border --BorderBlack11",src:e.controlUrl,fit:"fill"},null,8,["src"])):i("",!0),n(S,{class:"!align-bottom",disabled:!e.controlSubType,type:"primary",text:!!e.controlUrl,onClick:d=>k.$refs[e.controlSubType==1?"SelectStaffQrCodeRef":"SelectQrCodeRef"].dialogRef.visible=!0},{default:r(()=>[b(m(e.controlUrl?"编辑":"选择活码"),1)]),_:2},1032,["disabled","text","onClick"]),e.controlSubType==1?(t(),g(a(W),{key:1,ref:"SelectStaffQrCodeRef",isSigleSelect:"",onConfirm:({selected:d})=>{e.controlUrl=d.codeUrl,B.validateField("controlUrl")}},null,8,["onConfirm"])):i("",!0),e.controlSubType==2?(t(),g(a(J),{key:2,ref:"SelectQrCodeRef",isSigleSelect:"",onConfirm:({selected:d})=>{e.controlUrl=d.chatCodeUrl,B.validateField("controlUrl")}},null,8,["onConfirm"])):i("",!0)]),_:2},1024)])):i("",!0),a(c)==3?(t(),u("div",Ke,[n(f,{label:"链接类型",prop:"controlSubType",required:""},{default:r(()=>[n(P,{modelValue:e.controlSubType,"onUpdate:modelValue":d=>e.controlSubType=d,options:[{label:"获客链接",value:1,desc:"点击链接添加员工"},{label:"自定义链接",value:4,desc:"手动填写跳转链接"}]},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e.controlSubType==1?(t(),g(f,{key:0,label:"选择链接",prop:"controlUrl",required:""},{default:r(()=>[e.controlUrl?(t(),u("div",Me,m(e.controlUrl),1)):i("",!0),n(S,{type:"primary",text:!!e.controlUrl,onClick:l[5]||(l[5]=d=>k.$refs.SelectGetCustomerLinkRef.dialogRef.visible=!0)},{default:r(()=>[b(m(e.controlUrl?"编辑":"选择链接"),1)]),_:2},1032,["text"]),n(a(K),{ref:"SelectGetCustomerLinkRef",isSigleSelect:"",onConfirm:({selected:d})=>{e.controlUrl=d.codeUrl,B.validateField("controlUrl")}},null,8,["onConfirm"])]),_:2},1024)):i("",!0),e.controlSubType==4?(t(),g(T,{key:1,label:"设置链接",prop:"controlUrl",required:"",modelValue:e.controlUrl,"onUpdate:modelValue":d=>e.controlUrl=d},null,8,["modelValue","onUpdate:modelValue"])):i("",!0)])):i("",!0),[1,2,3].includes(+a(c))?(t(),u("div",Xe,[n(T,{label:"主标题",prop:"title",required:"",modelValue:e.title,"onUpdate:modelValue":d=>e.title=d,maxlength:"10"},null,8,["modelValue","onUpdate:modelValue"]),n(T,{label:"副标题",prop:"titleSub",required:"",modelValue:e.titleSub,"onUpdate:modelValue":d=>e.titleSub=d,maxlength:"15"},null,8,["modelValue","onUpdate:modelValue"])])):i("",!0),[3,1].includes(a(c))?(t(),g(T,{key:4,label:"按钮引导文案",prop:"guideTip",required:"",modelValue:e.guideTip,"onUpdate:modelValue":d=>e.guideTip=d,maxlength:"10"},null,8,["modelValue","onUpdate:modelValue"])):i("",!0)]),_:2},1032,["modelValue"])])):(t(),u("div",ze,"请上传图片并添加控件后设置"))])):i("",!0)],2)):i("",!0)])]),operate:r(({form:o,isDetail:C,formRef:Q,submitFn:e})=>[n(ae,null,{default:r(()=>[n(oe,null,{default:r(()=>[n(R,{type:"primary",plain:"",onClick:l[7]||(l[7]=p=>a(F).back())},{default:r(()=>[...l[19]||(l[19]=[b("取消",-1)])]),_:1}),a(U)>0?(t(),g(R,{key:0,type:"primary",plain:"",onClick:l[8]||(l[8]=p=>U.value--)},{default:r(()=>[...l[20]||(l[20]=[b("← 上一步",-1)])]),_:1})):i("",!0),a(U)<1?(t(),g(R,{key:1,type:"primary",onClick:p=>Q.validate().then(()=>U.value++)},{default:r(()=>[...l[21]||(l[21]=[b(" 下一步 → ",-1)])]),_:1},8,["onClick"])):i("",!0),a(U)==1?A((t(),g(R,{key:2,type:"primary",disabled:a(x).loading,onClick:p=>Z(e,k.$refs.formControlRef)},{default:r(()=>[...l[22]||(l[22]=[b(" 确定 ",-1)])]),_:1},8,["disabled","onClick"])),[[ne,a(x).loading]]):i("",!0)]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue"])}}}),ol=pe(Ye,[["__scopeId","data-v-355aea86"]]);export{ol as default};
