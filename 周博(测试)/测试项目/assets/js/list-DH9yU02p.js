import{H as R,r as n,o as c,c as f,j as e,G as U,e as a,C as b,k as y,t as $,F as B,h as D,d as Y,y as F,D as I}from"../index-DYxDfolO.js";const{get:g,post:M,put:x,delt:A}=R,m="/log";function P(l){return g(`${m}/findAll`,l)}function j(l){return g(`${m}/findOperateLogTypes`,l)}function q(l){return M(`${m}/synchOperateLog`,l)}const E={__name:"list",props:{type:{type:String,default:"1"}},setup(l){const T=l,u=I([]);function V(){j({operateType:T.type}).then(({data:p})=>{u.value=p})}return V(),(p,s)=>{const v=n("el-input"),d=n("el-form-item"),k=n("el-option"),S=n("el-select"),h=n("el-date-picker"),C=n("el-button"),r=n("el-table-column"),L=n("el-table"),N=n("RequestChartTable");return c(),f("div",null,[e(N,{ref:"rctRef",params:{operateType:l.type},request:b(P),searchBtnType:"icon"},U({query:a(({query:o})=>[e(d,{label:"员工名称",prop:"userName"},{default:a(()=>[e(v,{modelValue:o.userName,"onUpdate:modelValue":t=>o.userName=t,placeholder:"请输入",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(d,{label:"类型",prop:"operateTypeSub"},{default:a(()=>[e(S,{modelValue:o.operateTypeSub,"onUpdate:modelValue":t=>o.operateTypeSub=t,"popper-append-to-body":!1},{default:a(()=>[(c(!0),f(B,null,D(u.value,t=>(c(),Y(k,{key:t.val,label:t.value,value:t.subCode},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(d,{label:"操作时间",prop:"dateRange"},{default:a(()=>[e(h,F({clearable:"",modelValue:o.dateRange,"onUpdate:modelValue":t=>o.dateRange=t,"value-format":"YYYY-MM-DD",type:"daterange"},p.pickerOptions,{"range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"}),null,16,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),default:a(({data:o})=>[e(L,{class:"align-center",data:o},{default:a(()=>[e(r,{label:"操作时间",prop:"createTime"}),e(r,{label:"操作人",prop:"userName"}),e(r,{label:"操作类型",prop:"operateTypeSub"},{default:a(({row:t})=>{var i,_;return[y($((_=(i=u.value)==null?void 0:i.find(O=>O.subCode==t.operateTypeSub))==null?void 0:_.value),1)]}),_:1}),e(r,{label:"操作内容",prop:"operateContent"}),e(r,{label:"操作者IP",prop:"operateIp"})]),_:1},8,["data"])]),_:2},[p.isSelect?void 0:{name:"operation",fn:a(({selectedIds:o})=>[e(C,{type:"primary",onClick:s[0]||(s[0]=t=>b(q)({operateType:l.type}).then(()=>p.$sdk.msgSuccess()))},{default:a(()=>[...s[1]||(s[1]=[y(" 同步 ",-1)])]),_:1})]),key:"0"}]),1032,["params","request"])])}}};export{E as default};
