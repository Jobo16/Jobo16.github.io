import{_ as m,r as h,o as s,d as u,G as y,h as d,e as r,b as i,j as g,y as v,f as $,c as q,F as j,x as k,s as O}from"../index-DYxDfolO.js";const S=O({props:{placeholder:{type:String},allText:{type:String},isAll:{type:Boolean,default:!1},options:{type:[Array,Object],default:()=>[]},request:{type:Function},queryKeywordsKey:{type:String,default:""},query:{type:Object,default:()=>({})},defaultProps:{type:Object,default:()=>({value:"value",label:"label"})}},data(){return{loading:!1,list:void 0}},watch:{query(){this.getList()}},computed:{placeholderTransfer(){var e,t;return this.placeholder??"请选择"+(this.$attrs.label||((t=(e=this.$.parent)==null?void 0:e.props)==null?void 0:t.label)||"")+(this.queryKeywordsKey?"，支持关键词搜索":"")},allTextTransfer(){var e,t;return this.allText??"全部"+(this.$attrs.label||((t=(e=this.$.parent)==null?void 0:e.props)==null?void 0:t.label)||"")}},created(){this.getList()},methods:{getList(e){if(!this.request)return;this.loading=!0;let t=Object.assign({[this.queryKeywordsKey]:e},{pageNum:1,pageSize:1e3},this.query);this.request(t).then(({data:p,rows:f})=>{let o=p||f;o.forEach(a=>{a.value=a[this.defaultProps.value],a.label=a[this.defaultProps.label]}),this.list=Object.freeze(o)}).finally(()=>{this.loading=!1})}}});function T(e,t,p,f,o,a){const c=h("el-option"),b=h("el-select");return s(),u(k(e.$attrs.label||e.$attrs.prop?"BaFormItem":"div"),{class:"inline-block"},y({default:r(()=>[g(b,v({class:"BaSelect",clearable:"",placeholder:e.placeholderTransfer,"empty-values":e.isAll&&["",null],"collapse-tags":"",remote:!!e.request,"reserve-keyword":"","remote-method":e.getList,loading:e.loading},Object.assign({},e.$attrs,{style:"",class:"",id:""})),y({default:r(()=>[e.isAll?(s(),u(c,{key:0,label:e.allTextTransfer,value:void 0},null,8,["label"])):$("",!0),(s(!0),q(j,null,d(e.list||e.options,(l,n)=>(s(),u(c,{key:l[e.defaultProps.value],label:l[e.defaultProps.label]||l,value:l[e.defaultProps.value]||n},null,8,["label","value"]))),128))]),_:2},[d(Object.keys(e.$slots),(l,n)=>({name:l,fn:r(()=>[i(e.$slots,l,{},void 0,!0)])}))]),1040,["placeholder","empty-values","remote","remote-method","loading"]),i(e.$slots,"default",{},void 0,!0)]),_:2},[d(Object.keys(e.$slots).filter(l=>!["default"].includes(l)),(l,n)=>({name:l,fn:r(()=>[i(e.$slots,l,{},void 0,!0)])}))]),1024)}const P=m(S,[["render",T],["__scopeId","data-v-644eea53"]]);export{P as default};
