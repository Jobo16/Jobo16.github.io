import{l as b,f as x}from"./api-CfFiQaW5.js";import{_ as F,c as d,i as n,f as h,t as v,j as r,e as i,X as t,Y as k,r as m,o as p,F as L,I as C,k as M,A as V}from"../index-DYxDfolO.js";const T={name:"Login",data(){return{loginType:"username",ispassword:!0,loginForm:{username:"",password:"",rememberMe:!1,code:"",uuid:""},loginRules:{username:[{required:!0,trigger:"blur",message:"用户名不能为空"}],password:[{required:!0,trigger:"blur",message:"密码不能为空"}],code:[{required:!0,trigger:"change",message:"验证码不能为空"}]},authLink:"",loading:!1,redirect:void 0,dialogVisible:!0,isDemonstrationLogin:!1,threeLoginInfo:{}}},watch:{$route:{handler:function(o){this.redirect=o.query&&o.query.redirect},immediate:!0}},created(){this.getCookie(),this.findThreeLoginInfo()},methods:{findThreeLoginInfo(){x().then(({data:o})=>{this.threeLoginInfo.startThreeLogin=o.startThreeLogin,this.threeLoginInfo.threeLoginUrl=o.threeLoginUrl})},getCookie(){const o=t.get("username"),e=t.get("password"),l=t.get("rememberMe");this.loginForm={username:o===void 0?this.loginForm.username:o,password:e===void 0?this.loginForm.password:e,rememberMe:l===void 0?!1:!!l}},login(){this.$refs.loginForm.validate(o=>{if(o){this.loading=!0,this.loginForm.rememberMe?(t.set("username",this.loginForm.username,{expires:30}),t.set("password",this.loginForm.password,{expires:30}),t.set("rememberMe",this.loginForm.rememberMe,{expires:30})):(t.remove("username"),t.remove("password"),t.remove("rememberMe"));let e=JSON.parse(JSON.stringify(this.loginForm));e.password=this.loginForm.password,b(e).then(({data:l})=>{console.log("data----",l),k(l.token),this.$router.push(this.redirect||"/")}).catch(l=>{this.loading=!1})}})}}},I={class:"loginPage"},O={class:"w-[1200px] h-[730px] centerCenter flex --Radius"},N={class:"w-[50%] bg-(--ColorLight8) p-[40px]"},B=["src"],q={class:"text-[29px] blod ml5",style:{"vertical-align":"middle"}},S={class:"w-[50%] bg-(--BgWhite) relative"},U={class:"centerCenter"},G={class:"fxbw g-margin-b"},R={key:0},D={key:1},E={class:"fixed bottom-[30px] left-[50%] translate-x-[-50%] --FontBlack5 font12"},H=["innerHTML"];function K(o,e,l,Y,s,c){const g=m("svg-icon"),f=m("el-input"),u=m("el-form-item"),_=m("el-checkbox"),w=m("el-button"),y=m("el-form");return p(),d("div",I,[n("div",O,[n("div",N,[o.sysConfig.LOGO?(p(),d("img",{key:0,class:"h-[35px]",style:{"vertical-align":"middle"},src:(o.$store.app.isDark,o.sysConfig.LOGO),alt:""},null,8,B)):h("",!0),n("span",q,v(o.sysConfig.SYSTEM_NAME),1)]),n("div",S,[n("div",U,[e[5]||(e[5]=n("div",{class:"text-[29px] blod mb-[30px]"},"登录",-1)),r(y,{ref:"loginForm",size:"large",model:s.loginForm,rules:s.loginRules,class:"login-form",style:{"--formItemWidth":"390px"}},{default:i(()=>[s.loginType==="username"?(p(),d(L,{key:0},[r(u,{prop:"username"},{default:i(()=>[r(f,{modelValue:s.loginForm.username,"onUpdate:modelValue":e[0]||(e[0]=a=>s.loginForm.username=a),modelModifiers:{trim:!0},type:"text","auto-complete":"off",placeholder:"账号"},{prefix:i(()=>[r(g,{icon:"user",class:"input-icon"})]),_:1},8,["modelValue"])]),_:1}),r(u,{prop:"password"},{default:i(()=>[r(f,{modelValue:s.loginForm.password,"onUpdate:modelValue":e[2]||(e[2]=a=>s.loginForm.password=a),modelModifiers:{trim:!0},type:s.ispassword?"password":"text","auto-complete":"off",placeholder:"密码",onKeyup:C(c.login,["enter"])},{prefix:i(()=>[r(g,{icon:"password",class:"input-icon"})]),suffix:i(()=>[r(g,{icon:s.ispassword?"eye":"eye-open",class:"input-icon cp",onClick:e[1]||(e[1]=a=>s.ispassword=!s.ispassword)},null,8,["icon"])]),_:1},8,["modelValue","type","onKeyup"])]),_:1}),n("div",G,[r(_,{class:"fr",modelValue:s.loginForm.rememberMe,"onUpdate:modelValue":e[3]||(e[3]=a=>s.loginForm.rememberMe=a)},{default:i(()=>[...e[4]||(e[4]=[M("记住密码",-1)])]),_:1},8,["modelValue"])]),r(u,null,{default:i(()=>[r(w,{loading:s.loading,type:"default",class:"w-[100%]",onClick:V(c.login,["prevent"])},{default:i(()=>[s.loading?(p(),d("span",D,"登 录 中...")):(p(),d("span",R,"立即登录"))]),_:1},8,["loading","onClick"])]),_:1})],64)):h("",!0)]),_:1},8,["model","rules"])])])]),n("div",E,[n("span",{innerHTML:o.sysConfig.COPYRIGHT},null,8,H)])])}const P=F(T,[["render",K],["__scopeId","data-v-ace86d75"]]);export{P as default};
