# 回滚预案

## 1. 触发条件

满足任一条件应考虑回滚：

1. 门户无法加载或空白。
2. 目录树无法正常渲染。
3. iframe 预览大面积不可用。
4. URL 分享与恢复失效，影响日常使用。

## 2. 回滚原则

1. 优先恢复可用性，再排查根因。
2. 仅回滚门户壳层与脚本改动，不回滚成员项目内容。
3. 回滚过程保留日志，便于复盘。

## 3. 回滚步骤（Git）

1. 定位最后一个稳定提交：
   - `git log --oneline`
2. 在主分支创建回滚提交：
   - `git revert <bad_commit_sha>`
   - 多个提交按时间逆序 `git revert`。
3. 推送回滚：
   - `git push`
4. 观察 GitHub Pages 发布状态，确认恢复。

## 4. 快速验证清单

1. 首页可打开。
2. 目录树正常显示。
3. 至少抽检 3 个不同成员项目可预览。
4. hash 链接刷新可恢复。

## 5. 回滚后行动

1. 记录故障时间线与影响范围。
2. 在修复分支复现问题并补测试。
3. 修复后通过 `npm run quality` 再次发布。
